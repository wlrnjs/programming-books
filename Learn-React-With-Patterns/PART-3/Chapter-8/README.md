# 리액트 데이터 관리

- 비즈니스 로직 누수 현상
- ACL (오류 방지 계층)
- Prop Drilling 문제 살펴보기
- Context API를 통한 Prop Drilling 문제 해결

## 8.1 비즈니스 로직 누수 현상

비즈니스 로직은 비즈니스 애플리케이션 운영을 위한 규칙과 계산 로직, 절차 등을 의미합니다.
비즈니스 로직과 관련 없는 컴포넌트나 애플리케이션 영역으로 흘러 들어가는 현상을 비즈니스 로직 누수라 합니다.

이 문제는 다양한 프로젝트에서 종종 발생합니다. 리액트에서 비즈니스 로직을 다루는 널리 합의된 접근 방식이 없어 이러한 현상이 나타납니다. 프레임워크의 유연성 덕분에 비즈니스 로직을 컴포넌트나 훅 또는 헬퍼 함수에 직접 작성하는 것이 가능하기 때문에, 로직을 당장 필요한 컴포넌트에 끼워 넣다 보면 로직의 누수로 이어지게 됩니다.

비즈니스 로직의 누수는 로직과 강하게 결합된 컴포넌트를 만들어내고 테스트와 유지보수, 재사용을 어렵게 합니다. 비즈니스 로직이 애플리케이션의 여러 부분에 걸쳐 흩어져 있다면, 코드 중복이 나타나고 일관성이 부족해집니다. 이로 인해 애플리케이션은 오류에 취약해지고 디버깅하기 어려워집니다. 또한, 비즈니스 로직을 수정할 때 여러 곳을 동시에 변경해야 하므로 또 다른 문제가 발생할 위험이 있습니다.

비즈니스 로직이 누수되고 있는지 알 수 있는 다양한 지표들이 있지만, 가장 흔한 징후는 뷰 또는 UI 컴포넌트 내에서 데이터 변환이 함께 수행되는 것입니다.

## 8.2 ACL (오류 방지 계층)

소프트웨어 개발에서 ACL은 각각 다른 언어를 사용하는 다른 서브시스템 간의 통역가 또는 중재자 역할을 합니다. 서로 다른 규칙과 구조를 가진 두 시스템을 직접 연결한다면 서로 의도치 않게 영향을 끼칠 수 있고 각각의 고유 도메인 로직을 훼손할 수 있습니다.

특히 복잡한 프론트엔드 애플리케이션 개발에서, ACL은 프론트엔드의 다양한 백엔드 API를 연결해 주는 역할을 합니다. 프론트엔드 개발은 일관성이 부족하거나 복잡한 데이터 형식을 가진 여러 서비스를 다뤄야 할 때가 종종 있습니다. 프론트엔드에 ACL을 구현하여 이러한 서비스들과 상호작용을 하는 통합 인터페이스를 만들 수 있습니다.

예를 들어 프론트엔드 애플리케이션이 RESTFul API와 GraphQL 서비스, WebSocket 서버와 상호작용해야 한다고 합시다. 이 서비스들은 고유의 규칙과 데이터 구조, 복잡성을 갖습니다. 프론트엔드 ACL은 이런 여러 다른 형식의 데이터들을 프론트엔드 애플리케이션에서 이해할 수 있는 형태로 변환하는 역할을 합니다. UI 컴포넌트는 각 서비스별 데이터 형식의 복잡한 세부 사항에 대해 신경 쓰지 않아도 되므로 개발과 테스트, 유지보수를 쉽게 할 수 있습니다.

ACL은 캐시 처리, 오류 변환과 같은 여러 문제를 처리하는 전략 계층으로 활용할 수 있습니다. 이러한 기능들을 한 곳에 집중하면 로직이 여러 프론트엔드 코드베이스에 분산되는 것을 방지하게 되므로 중복 배제(DRY) 원칙을 준수할 수 있습니다.

### 8.2.2 예외 상황 대응 또는 기본값

데이터를 변환할 때 자주 보이는 상황 중 하나는 리액트 뷰에 과도하게 방어적인 프로그램을 작성하는 것입니다. 방어적 프로그래밍은 다양한 상황에서 유용하게 사용되는 좋은 방법이지만, 리액트 컴포넌트 안에서 과도하게 null 체크를 하거나 예외 상황에 대한 대응 코드를 작성하는 것은 코드를 복잡하게 하고 이해하기 어렵게 만듭니다.

방어적 프로그래밍은 발생할 수 있는 오류와 실패 또는 예외 상황 등을 자연스럽게 처리하기 위해, 필요한 코드를 작성하는 것을 의미합니다. 애플리케이션이 예상하지 못한 상황에서도 정상으로 복원하기 쉽고 안정적으로 작동할 수 있도록 합니다.

## 8.3 Prop Drilling 문제 살펴보기

Prop Drilling은 데이터가 필요하지 않은 여러 계층으로 이루어진 컴포넌트들을 통과하여 하위 계층으로 데이터를 전달해야 할 때 발생하는 문제입니다. 이러한 구조는 코드 가독성을 떨어뜨리고 유지보수하기 어렵게 만듭니다.

## 8.4 Context API를 통한 Prop Drilling 문제 해결

Context API를 통해 Prop Drilling 문제를 다루는 기본 원리는 동일한 부모 컴포넌트에 속한 모든 하위 컴포넌트가 공용으로 사용하는 컨테이너를 만드는 것입니다.
이렇게 하면 명시적으로 부모에서 자식 컴포넌트로 prop을 전달할 필요가 없어집니다. 하위 컴포넌트는 필요할 때 언제든지 공용 컨텍스트에 직접 접근할 수 있습니다. Context API의 또 다른 장점은 컨텍스트가 변경되면 자동으로 컴포넌트를 다시 렌더링해준다는 것입니다.
